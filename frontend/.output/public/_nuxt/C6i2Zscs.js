import D from"./RS6ESvoO.js";import{p as V,c as p,o as u,a as t,s as C,t as f,b as v,w as k,d as U,z as N,j as b,F as $,v as P,r as g,g as O,q as R,A as F}from"./BG0I7BMR.js";import E from"./t30yklHG.js";import A from"./BRk9Si4A.js";import L from"./CEI7DKE7.js";import T from"./B3Ebp185.js";import"./Be1fzYNM.js";import"./DSnwt2cP.js";import"./D7MfS3S_.js";import"./C8vTVB2U.js";import"./CWnaGq7v.js";import"./BPHsYKlM.js";import"./DsI1fMEX.js";import"./DmfvTtO6.js";import"./DGEOgZpe.js";import"./DB3nJGQ2.js";import"./CbnopXW0.js";import"./CHWixd10.js";import"./DIudqeWQ.js";import"./vTy5nxYc.js";import"./BHkjJHUY.js";import"./DwZpbfc8.js";import"./B7gjMl4Y.js";import"./Bo5-GbA0.js";import"./69POEGYm.js";import"./CfmLXlSH.js";import"./DxCA3P50.js";import"./B0i2tx47.js";import"./D3dhAYI1.js";import"./BnZd5aeZ.js";import"./BwmTdv67.js";import"./Sz27FRI2.js";const G={class:"bg-white flex flex-col flex-1 shrink rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 relative"},H={class:"relative h-48"},J=["src","alt"],K={key:0,class:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded shadow"},Q={key:1,class:"absolute top-2 left-2 ml-20 bg-green-600 text-white text-xs font-bold px-2 py-1 rounded shadow"},W={key:2,class:"absolute top-2 right-2 bg-yellow-400 text-white text-xs font-bold px-2 py-1 rounded shadow"},X={class:"flex flex-col h-36 p-2 md:p-3"},Y={class:"flex flex-1 text-sm font-semibold text-gray-800 mb-1"},Z={class:"flex items-center space-x-2 mb-1"},ee={key:0,class:"text-gray-400 line-through text-xs"},te={class:"flex h-font-weight-600 h-color-lunar-green h-font-size-16"},le={class:"flex w-full"},oe={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(i){const m=V(()=>{new Date(i.product.datePublished)});return(d,l)=>{const x=D;return u(),p("div",G,[t("div",H,[t("img",{src:i.product.image,alt:i.product.title,class:"w-full h-full object-cover"},null,8,J),i.product.discount>0?(u(),p("span",K," -"+f(i.product.discount)+"% ",1)):C("",!0),m.value?(u(),p("span",Q," Nou ")):C("",!0),i.product.popularity>100?(u(),p("span",W," Popular ")):C("",!0),l[0]||(l[0]=t("button",{class:"absolute bottom-2 right-2 h-font-size-20 flex items-center justify-center transition-all duration-300 w-10 h-10 h-bg-white rounded-full group hover:scale-110"},[t("i",{class:"ph ph-heart transition-all duration-300 group-hover:hidden h-color-primary"}),t("i",{class:"ph ph-fill transition-all duration-300 ph-heart hidden group-hover:block h-color-primary"})],-1))]),t("div",X,[t("h3",Y,f(i.product.title),1),t("div",Z,[i.product.discount>0?(u(),p("span",ee,f(i.product.priceBeforeDiscount)+" RON",1)):C("",!0),t("span",te,f(i.product.price)+" RON",1)]),t("div",le,[v(x,{class:"maini-ui-button__buy w-full flex justify-center items-center h-bg-primary h-color-white border-none"},{default:k(()=>l[1]||(l[1]=[U(" Adaugă în coș ")])),_:1})])])])}}},se={class:"flex flex-col space-y-4"},ae={class:"mb-4"},ie={class:"flex flex-col space-y-2"},re={class:"flex items-center"},ne=["for"],de={class:"flex justify-center"},ue={__name:"ModalCategorySelect",props:{showModal:{type:Boolean,required:!0},categories:{type:Array,required:!0},selectedCategories:{type:Array,required:!0},numberofProducts:{type:Number,required:!0}},emits:["update:showModal","update:selectedCategories"],setup(i,{emit:m}){const d=i,l=m,x=V(()=>d.selectedCategories.includes("All"));function c(h){h?l("update:selectedCategories",["All"]):d.categories.includes("Cani")?l("update:selectedCategories",["Cani"]):l("update:selectedCategories",d.categories.length>0?[d.categories[0]]:[])}function w(h,n){let a=[...d.selectedCategories];a.includes("All")&&(a=a.filter(y=>y!=="All")),n?a.push(h):a=a.filter(y=>y!==h),a.length===0&&(a=["All"]),l("update:selectedCategories",a)}return(h,n)=>(u(),N(b(E),{visible:i.showModal,position:"bottom","onUpdate:visible":n[1]||(n[1]=a=>l("update:showModal",a)),modal:"",class:"w-full !m-0 !rounded-none"},{header:k(()=>n[2]||(n[2]=[t("h3",{class:"text-xl font-semibold"},"Selectează categorii",-1)])),default:k(()=>[t("div",se,[t("div",ae,[n[4]||(n[4]=t("div",{class:"font-semibold mb-2"},"Categories",-1)),t("ul",ie,[t("li",re,[v(b(A),{binary:!0,inputId:"modal-all-products",modelValue:x.value,"onUpdate:modelValue":c},null,8,["modelValue"]),n[3]||(n[3]=t("label",{for:"modal-all-products",class:"ml-2"},"All Products",-1))]),(u(!0),p($,null,P(i.categories,a=>(u(),p("li",{key:"modal-cat-"+a,class:"flex items-center"},[v(b(A),{inputId:"modal-cat-"+a,binary:!0,modelValue:i.selectedCategories.includes(a),"onUpdate:modelValue":y=>w(a,y)},null,8,["inputId","modelValue","onUpdate:modelValue"]),t("label",{for:"modal-cat-"+a,class:"ml-2"},f(a),9,ne)]))),128))])])]),t("div",de,[t("button",{class:"maini-ui-button w-full bg-white border-1 h-border-color-geyser",onClick:n[0]||(n[0]=a=>l("update:showModal",!1))}," Vezi produse ("+f(i.numberofProducts)+") ",1)])]),_:1},8,["visible"]))}};function j(i){const m=i;m.__i18n=m.__i18n||[],m.__i18n.push({locale:"",resource:{en:{produse:{t:0,b:{t:2,i:[{t:3}],s:"Products"}}},ro:{produse:{t:0,b:{t:2,i:[{t:3}],s:"Produse"}}}}})}const ce={class:"maini-ui__section md:px-4"},pe={class:"maini-ui__container-products"},me={class:"flex flex-col mb-4 lg:flex-row lg:items-center lg:justify-between lg:mb-4"},fe={class:"flex text-2xl justify-start font-bold"},he={class:"grid grid-cols-2 md:flex md:justify-end gap-2"},ge={class:"flex md:hidden"},ve={class:"flex"},be={class:"flex flex-row"},xe={class:"hidden md:flex flex-col w-1/5 flex-shrink-0 mr-8"},ye={class:"flex flex-col"},we={class:"mb-4 bg-white rounded-lg p-4 shadow-sm"},_e={class:"flex flex-col space-y-2"},Ce={class:"flex items-center"},$e=["for"],Ve={class:"mb-6 bg-white rounded-lg p-4 shadow-sm"},Ae={class:"flex justify-between text-sm"},ke={class:"flex flex-col w-full"},Pe={class:"grid grid-cols-2 lg:grid-cols-3 gap-2 lg:gap-6"},Me={__name:"produse",setup(i){const m=g([]),d=g([]),l=g(["All"]),x=g("popularity"),c=g([0,1e3]),w=g(0),h=g(1e3),n=g(!1),a=V(()=>l.value.includes("All")),y=[{label:"Cele mai populare",value:"popularity"},{label:"Cele mai noi",value:"newest"},{label:"Pret crescator",value:"price-asc"},{label:"Pret descrescator",value:"price-desc"},{label:"Discount",value:"discount"}],{t:z}=O({useScope:"local"});R(async()=>{try{const e=await(await fetch("http://localhost:4000/products")).json();m.value=e,d.value=[...new Set(e.map(_=>_.category))];const s=e.map(_=>_.price);w.value=Math.min(...s),h.value=Math.max(...s),c.value=[w.value,h.value]}catch(o){console.error("Error fetching products:",o)}});const M=V(()=>{let o=m.value;switch(l.value.includes("All")||(o=o.filter(e=>l.value.includes(e.category))),o=o.filter(e=>e.price>=c.value[0]&&e.price<=c.value[1]),x.value){case"popularity":o=[...o].sort((e,s)=>s.popularity-e.popularity);break;case"newest":o=[...o].sort((e,s)=>new Date(s.datePublished)-new Date(e.datePublished));break;case"price-asc":o=[...o].sort((e,s)=>e.price-s.price);break;case"price-desc":o=[...o].sort((e,s)=>s.price-e.price);break;case"discount":o=[...o].sort((e,s)=>s.discount-e.discount);break}return o});function B(o){console.log("All checkbox changed to:",o),o?l.value=["All"]:(d.value.includes("Cani")?l.value=["Cani"]:l.value=d.value.length>0?[d.value[0]]:[],F(()=>{console.log("Selected categories after unchecking All:",l.value)}))}function I(o,e){console.log("Category toggled:",o,e),l.value.includes("All")&&(l.value=l.value.filter(s=>s!=="All")),e?l.value.push(o):l.value=l.value.filter(s=>s!==o),l.value.length===0&&(l.value=["All"])}const S=o=>{const[e,s]=o;if(e>s){c.value=[s,s];return}if(s<e){c.value=[e,e];return}c.value=[e,s]};return(o,e)=>{const s=oe,_=ue;return u(),p($,null,[t("div",ce,[t("div",pe,[t("div",me,[t("h2",fe,f(b(z)("produse")),1),t("div",he,[t("div",ge,[t("button",{class:"maini-ui-button flex justify-between items-center w-full h-bg-transparent border-1 h-border-color-geyser h-color-pickled-bluewood",onClick:e[0]||(e[0]=r=>n.value=!0)},e[5]||(e[5]=[U(" Filtrează "),t("i",{class:"ph ph-caret-down h-font-size-20 flex items-center justify-center h-color-gull-gray h-font-weight-500"},null,-1)]))]),t("div",ve,[v(b(T),{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=r=>x.value=r),options:y,optionLabel:"label",optionValue:"value",placeholder:"Ordonează",class:"text-xs w-full items-center"},null,8,["modelValue"])])])]),t("div",be,[t("div",xe,[t("aside",ye,[t("div",we,[e[7]||(e[7]=t("div",{class:"font-semibold mb-2"},"Categories",-1)),t("ul",_e,[t("li",Ce,[v(b(A),{binary:!0,inputId:"all-products",modelValue:a.value,"onUpdate:modelValue":B},null,8,["modelValue"]),e[6]||(e[6]=t("label",{for:"all-products",class:"ml-2"},"All Products",-1))]),(u(!0),p($,null,P(d.value,r=>(u(),p("li",{key:"cat-"+r,class:"flex items-center"},[v(b(A),{inputId:"cat-"+r,binary:!0,modelValue:l.value.includes(r),"onUpdate:modelValue":q=>I(r,q)},null,8,["inputId","modelValue","onUpdate:modelValue"]),t("label",{for:"cat-"+r,class:"ml-2"},f(r),9,$e)]))),128))])]),t("div",Ve,[e[8]||(e[8]=t("div",{class:"font-semibold mb-2"},"Price Range",-1)),v(b(L),{modelValue:c.value,"onUpdate:modelValue":[e[2]||(e[2]=r=>c.value=r),S],min:w.value,max:h.value,step:1,range:"",class:"mb-2",pt:{range:{class:"bg-primary"},handle:{class:"border-primary"}}},null,8,["modelValue","min","max"]),t("div",Ae,[t("span",null,"$"+f(c.value[0]),1),t("span",null,"$"+f(c.value[1]),1)])])])]),t("div",ke,[t("div",Pe,[(u(!0),p($,null,P(M.value,r=>(u(),N(s,{key:r.id,product:r},null,8,["product"]))),128))])])])])]),v(_,{showModal:n.value,"onUpdate:showModal":e[3]||(e[3]=r=>n.value=r),categories:d.value,selectedCategories:l.value,"onUpdate:selectedCategories":e[4]||(e[4]=r=>l.value=r),numberofProducts:M.value.length},null,8,["showModal","categories","selectedCategories","numberofProducts"])],64)}}};typeof j=="function"&&j(Me);export{Me as default};
